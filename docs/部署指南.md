# 稳定性保持系统部署指南

## 1. 系统要求

- **操作系统**：支持Linux系统（如Ubuntu、CentOS、RHEL等）
- **硬件要求**：
  - 处理器：双核及以上
  - 内存：2GB及以上
  - 存储：100MB可用空间
  - 网络：支持TCP/IP通信

## 2. 安装说明

### 2.1 Ubuntu系统安装

1. 使用dpkg命令安装DEB包：
   
   ```bash
   sudo dpkg -i stability-retention-system-1.0.0-amd64.deb
   ```

2. 如果安装过程中提示缺少依赖，请运行：
   
   ```bash
   sudo apt-get install -f
   ```

### 2.2 CentOS/RHEL系统安装

1. 使用rpm命令安装RPM包：
   
   ```bash
   sudo rpm -ivh stability-retention-system-1.0.0-1.x86_64.rpm
   ```

> **注意**：安装完成后，系统服务会自动设置为开机自启动。

## 3. 配置说明

> **重要提示**：在启动服务前，请先完成系统配置。

系统配置文件位于 `/etc/stability-system/config.ini`，主要配置项包括：

### 3.1 服务器配置

```ini
[server]
port = 8080               # API服务监听端口
host = 0.0.0.0            # API服务监听地址
```

### 3.2 PLC配置

```ini
[plc]
ip = 127.0.0.1        # PLC设备IP地址
port = 102                # PLC设备Modbus TCP端口
```

### 3.3 日志配置

```ini
[logging]
level = info              # 日志级别：trace, debug, info, warning, error, critical
```

### 3.4 边缘系统配置

```ini
[edge_system]
url = http://app.glsh.eeb.cn:8080/autocheck-edge/    # 边缘系统完整URL
```

## 4. 服务管理

### 4.1 启动服务

```bash
sudo systemctl start stability-system.service
```

### 4.2 停止服务

```bash
sudo systemctl stop stability-system.service
```

### 4.3 重启服务

```bash
sudo systemctl restart stability-system.service
```

### 4.4 查看服务状态

```bash
sudo systemctl status stability-system.service
```

### 4.5 设置开机自启

```bash
sudo systemctl enable stability-system.service
```

### 4.6 卸载服务

系统提供了专门的卸载命令，执行后会停止服务、删除服务文件和可执行文件：

```bash
sudo stability-uninstall
```

执行此命令后，系统会询问是否同时删除配置文件。如果确认删除，将彻底移除系统的所有组件和配置。

## 5. 故障排除

### 5.1 服务无法启动

1. 检查配置文件格式是否正确
2. 检查端口是否被占用
3. 查看系统日志：
   
   ```bash
   sudo journalctl -u stability-system.service
   ```

### 5.2 无法连接PLC

1. 检查PLC设备IP地址和端口配置是否正确
2. 确认网络连接是否正常
3. 检查防火墙设置是否允许通信

## 6. 技术支持

如有问题请联系技术支持团队：vijaysue@yeah.net